models:
  - name: stg_spark_feature_events
    description: "Cleaned Spark-processed hourly feature usage"
    meta:
      data_lineage: |
        Raw Events (Data Lake) 
        → Apache Spark (hourly_aggregation.py)
        → Processed CSV (data/spark_processed/)
        → dbt Staging (this model)
        → dbt Marts (analytics-ready)
    columns:
      - name: window_start
        description: "Hourly window generated by Spark window functions"
        tests:
          - not_null
      - name: event_count  
        description: "Event count aggregated by Spark groupBy operations"
        tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 1
              max_value: 1000